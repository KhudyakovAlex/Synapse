<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Synapse (Mermaid ERD) - –î–∏–∞–≥—Ä–∞–º–º–∞ 1 - Synapse Diagram</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #333333;
            --accent-primary: #667eea;
            --accent-secondary: #764ba2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow: auto;
        }
        
        .header {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .header a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s ease;
        }
        
        .header a:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .diagram-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            overflow: auto;
        }
        
        .mermaid {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
    <script>
        window.mermaid = {
            startOnLoad: true,
            theme: "default",
            securityLevel: "loose"
        };
    </script>
    <script defer src="../assets/js/mermaid.min.js"></script>
</head>
<body>
    <header class="header">
        <h1>üîÜ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Synapse (Mermaid ERD) - –î–∏–∞–≥—Ä–∞–º–º–∞ 1</h1>
        <a href="db_schema_mermaid.html">‚Üê –ù–∞–∑–∞–¥ –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É</a>
    </header>
    
    <div class="diagram-container">
        <div class="mermaid">
erDiagram
    CONTROLLER {
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞"
        string PASSWORD "–ø–∏–Ω–∫–æ–¥ 4 —Ü–∏—Ñ—Ä—ã"
        boolean IS_SCHEDULE "–≤–∫–ª—é—á–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ"
        int ICO_NUM "–Ω–æ–º–µ—Ä –∏–∫–æ–Ω–∫–∏"
    }

    LOCATIONS {
        int NUM PK "–ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä"
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏"
        int ICO_NUM "–Ω–æ–º–µ—Ä –∏–∫–æ–Ω–∫–∏"
        boolean IS_AUTO "–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º"
        int SCALE "–º–∞—Å—à—Ç–∞–± —Å–µ—Ç–∫–∏ 1-3"
        int POS "–ø–æ–∑–∏—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ 0-255"
    }

    GROUPS {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"
        int DALI_NUM "–Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã –≤ DALI"
        int LOCATION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏"
    }

    LUMINAIRES {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∞"
        int DALI_ADDR "–∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å DALI"
        int LOCATION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏"
        int GROUP_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã (nullable)"
        int ICO_NUM "–Ω–æ–º–µ—Ä –∏–∫–æ–Ω–∫–∏"
        int POS_X "–∫–æ–ª–æ–Ω–∫–∞ 0-255"
        int POS_Y "—Ä—è–¥ 0-255"
    }

    PRES_SENSORS {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞"
        int DALI_ADDR "–∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å DALI"
        int DALI_INST "–Ω–æ–º–µ—Ä –∏–Ω—Å—Ç–∞–Ω—Å–∞"
        int LOCATION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏"
        int DELAY "–∑–∞–¥–µ—Ä–∂–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–µ–∫"
    }

    BRIGHT_SENSORS {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞"
        int DALI_ADDR "–∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å DALI"
        int DALI_INST "–Ω–æ–º–µ—Ä –∏–Ω—Å—Ç–∞–Ω—Å–∞"
        int LOCATION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏"
        int GROUP_ID FK "—É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –≥—Ä—É–ø–ø–∞"
    }

    BUTTON_PANELS {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏"
        int DALI_ADDR "–∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å DALI"
        int LOCATION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏"
    }

    BUTTONS {
        int ID PK
        int NUM "–Ω–æ–º–µ—Ä –∫–Ω–æ–ø–∫–∏ –Ω–∞ –ø–∞–Ω–µ–ª–∏"
        int BUTTON_PANEL_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–∞–Ω–µ–ª–∏"
        int DALI_INST "–Ω–æ–º–µ—Ä –∏–Ω—Å—Ç–∞–Ω—Å–∞"
        int ACTION_ID FK "–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é"
    }

    ACTIONS {
        int ID PK
        int GROUP_ID FK "–≥—Ä—É–ø–ø–∞ (nullable)"
        int LUMINAIRE_ID FK "—Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (nullable)"
        int SCENE_ID FK "—Å—Ü–µ–Ω–∞ (nullable)"
        int VAL_BRIGHT "—è—Ä–∫–æ—Å—Ç—å"
        int VAL_TW "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±–µ–ª–æ–≥–æ"
        int VAL_R "–∫—Ä–∞—Å–Ω—ã–π RGB"
        int VAL_G "–∑–µ–ª–µ–Ω—ã–π RGB"
        int VAL_B "—Å–∏–Ω–∏–π RGB"
        int VAL_W "–±–µ–ª—ã–π RGBW"
    }

    EVENTS {
        int ID PK
        boolean DATE_EVERYDAY "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ"
        string DATE_DAYS "–ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏"
        date DATE_SPECIFIC "–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞"
        time TIME "–≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è"
        boolean SMOOTH "–ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ"
        int ACTION_ID FK "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è"
    }

    SCENES {
        int ID PK
        string NAME "–Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã"
    }

    %% –°–≤—è–∑–∏ –ª–æ–∫–∞—Ü–∏–π
    LOCATIONS ||--o{ LUMINAIRES : "—Å–æ–¥–µ—Ä–∂–∏—Ç"
    LOCATIONS ||--o{ GROUPS : "—Å–æ–¥–µ—Ä–∂–∏—Ç"
    LOCATIONS ||--o{ PRES_SENSORS : "—Å–æ–¥–µ—Ä–∂–∏—Ç"
    LOCATIONS ||--o{ BRIGHT_SENSORS : "—Å–æ–¥–µ—Ä–∂–∏—Ç"
    LOCATIONS ||--o{ BUTTON_PANELS : "—Å–æ–¥–µ—Ä–∂–∏—Ç"

    %% –°–≤—è–∑–∏ –≥—Ä—É–ø–ø
    GROUPS ||--o{ LUMINAIRES : "–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç"
    GROUPS ||--o{ BRIGHT_SENSORS : "—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è"
    GROUPS ||--o{ ACTIONS : "—É–ø—Ä–∞–≤–ª—è–µ—Ç"

    %% –°–≤—è–∑–∏ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤
    LUMINAIRES ||--o{ ACTIONS : "—É–ø—Ä–∞–≤–ª—è–µ—Ç"

    %% –°–≤—è–∑–∏ –∫–Ω–æ–ø–æ—á–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π
    BUTTON_PANELS ||--o{ BUTTONS : "—Å–æ–¥–µ—Ä–∂–∏—Ç"

    %% –°–≤—è–∑–∏ –¥–µ–π—Å—Ç–≤–∏–π
    ACTIONS ||--o{ BUTTONS : "–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"
    ACTIONS ||--o{ EVENTS : "–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"
    SCENES ||--o{ ACTIONS : "–∏—Å–ø–æ–ª—å–∑—É–µ—Ç"

        </div>
    </div>
</body>
</html>
