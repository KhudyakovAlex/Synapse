# АПК Синапс v1.0. ПО. База данных

**Версия документа:** 1.0  
**Дата создания:** 19.11.2025  
**Статус:** Черновик

## 20. Приложение. База данных (основные таблицы)

20.1. Данные в прошивке/приложении делятся на два типа:
- **Рабочие** — необходимые для организации работы освещения в прошивке и приложении (помечены ниже жирным);
- **Интерфейсные** — используемые только приложением и хранящиеся в прошивке только ради передачи их между несколькими телефонами.

20.2. CONTROLLER — таблица с одной записью (в отличие от приложения):

- **NAME** — название контроллера, показываемое в приложении;
- **PASSWORD** — пинкод; 4 цифры; заводской на коробке (или наклейке на корпусе);
- **IS_SCHEDULE** — T/F — включена ли в контроллере работа по расписанию;
- **ICO_NUM** — номер иконки, которую будет иметь контроллер в приложении; 0 — дефолтная, заводская.

20.3. LOCATIONS — локации

- NUM — порядковый номер локации;
- NAME — название локации;
- ICO_NUM — номер иконки, которую будет иметь локация в приложении; 0 — дефолтная, заводская;
- **IS_AUTO** — T/F — работает ли локация в автоматическом режиме по датчикам;
- SCALE — 1..3 — масштаб сетки с иконками светильников;
- POS — 0..255 — позиция локации в списке локаций.

20.5. LUMINAIRES — светильники

- NAME — название светильника;
- **DALI_ADDR** — короткий адрес DALI;
- **LOCATION_ID** — идентификатор локации;
- **GROUP_ID** — идентификатор группы; NULL, если не в группе;
- ICO_NUM — номер иконки, которую будет иметь светильник в приложении; 0 — дефолтная, заводская;
- POS_X — 0..255 — колонка иконки в сетке светильников;
- POS_Y — 0..255 — ряд иконки в сетке светильников.

20.4. GROUPS — группы светильников

- NAME — название группы;
- **DALI_NUM** — номер группы в DALI;
- **LOCATION_ID** — идентификатор локации.

20.6. PRES_SENSORS — датчики присутствия

- NAME — название датчика;
- **DALI_ADDR** — короткий адрес DALI;
- **DALI_INST** — номер инстанса в DALI;
- **LOCATION_ID** — идентификатор локации;
- **DELAY** — задержка выключения (секунды).

20.7. BRIGHT_SENSORS — датчики освещённости

- NAME — название датчика;
- **DALI_ADDR** — короткий адрес DALI;
- **DALI_INST** — номер инстанса в DALI;
- **LOCATION_ID** — идентификатор локации;
- **GROUP_ID** — идентификатор группы, которой управляет датчик;

20.8. BUTTON_PANELS — кнопочные панели

- NAME — название панели;
- **DALI_ADDR** — короткий адрес DALI;
- **LOCATION_ID** — идентификатор локации.

20.9. BUTTONS — кнопки

- NUM — номер кнопки на панели;
- **BUTTON_PANEL_ID** — идентификатор панели;
- **DALI_INST** — номер инстанса в DALI;
- **ACTION_ID** — действие по нажатию;

20.10. ACTIONS — действия с устройствами

- **GROUP_ID** — идентификатор группы; если действие на группу;
- **LUMINAIRE_ID** — идентификатор светильника; если действие на отдельный светильник;
- **SCENE_ID** — идентификатор сцены;
- **VAL_BRIGHT** — значение яркости;
- **VAL_TW** — значение температуры белого света;
- **VAL_R** — значение красного канала (для RGB);
- **VAL_G** — значение зеленого канала (для RGB);
- **VAL_B** — значение синего канала (для RGB);
- **VAL_W** — значение белого канала (для RGBW).

20.11. EVENTS — события расписания

- **DATE_EVERYDAY** — T/F — ежедневное событие;
- **DATE_DAYS** — 'FFTFFFF' — событие по дням недели;
- **DATE_SPECIFIC** — конкретная дата;
- **TIME** — время события с точностью до минуты;
- **SMOOTH** — T/F — плавное изменение параметра от предыдущего значения (яркость, температура света);
- **ACTION_ID** — идентификатор действия.