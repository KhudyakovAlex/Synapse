# Unit System Model Language

АПК Синапс v1.0. ПО. Спецификации на разработку

**Последнее изменение:** 24.11.2025

## 1. Термины и определения

1.1. **USML** (Unit System Model Language) — система команд (телеграмм) для передачи данных в рамках АПК Синапс. Предназначен для общения LLM, мобильного приложения и прошивки контроллера.

1.2. **Телеграмма**, она же **телега** — название команды в USML, дабы отличать их от других команд.

## 2. Формат телеграмм

2.1. Телега представляет собой текстовый блок в кодировке CP1251 (Windows-1251), начинающийся с символа [ и заканчивающийся ].

2.2. Встречающиеся в теле телеги [ и ] экранируются: \[ и \].

2.3. В теле телеги могут иметь место разделяемые пробелами:
- зарезервированные слова: SET, ACTION, HOLD_TIME;
- целые числа в виде текстовых последовательностей цифр: 123;
- тексты, помещенные в двойные кавычки: "Лампочка 12" (кавычки экранируются \");
- бинарные блоки в Base64.

2.4. Пример телеги: [LUM SET 63 "Свет.3" IGlzIGRpc3Rpbmd1aXNoZWQsIG5vdC]

2.5. В целях сокращения размера кода в прошивке, парсящего телеги, зарезервированные слова перед отправкой в контроллер заменяются на соответствующие им числа: [1 2 63 "Свет.3" IGlzIGRpc3Rpbmd1aXNoZWQsIG5vdC].

2.6. Парсер принимает и понимает очередной элемент в телеге на основе последовательности ранее принятых элементов. Например:
[
LUM (или 1) — у светильника
SET (или 2) — установить
63 — имеющего адрес 63
"Свет.3" — название
IGlzIGRpc3Rpbmd1aXNoZWQsIG5vdC — а это записать куда-то в его память
]

## 3. Вопросы

3.1. Двоичные блоки кодируем в Base64?

3.2. Кодировку для кириллицы используем CP1251 (Windows-1251)?

## 4. Идеи

4.1. Не являются ли телеги просто вызовами удаленных фцнкций?
